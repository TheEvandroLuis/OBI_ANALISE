<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBI Explorer Interativo: An√°lise de Exerc√≠cios (2021-2024)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Soft Teal -->
    <!-- Application Structure Plan: A single-page dashboard application designed for task-oriented exploration. The core is a control panel with multiple filters (Ano, N√≠vel, Fase, Dificuldade, Pesquisa) that allows users to dynamically query the OBI exercise dataset. The results are displayed in three coordinated views: 1) A statistical overview with key metrics and two charts (Distribui√ß√£o de Dificuldade, T√≥picos por Frequ√™ncia) to provide a high-level summary. 2) A detailed, filterable HTML table showing the raw data for in-depth analysis. 3) An informational section with contextual analysis and study recommendations from the report. This structure was chosen because it transforms the static report into a powerful, non-linear exploration tool. It empowers users (students/coaches) to answer specific questions like "What are the most common 'Dif√≠cil' topics in N√≠vel 2, Fase 3?" or "Show me all 'F√°cil' exercises from 2024", which is far more efficient than manually scanning the original document. -->
    <!-- Visualization & Content Choices: 
        - Goal: Inform (High-level summary) -> Presentation: Key stat cards (e.g., 'Total de Exerc√≠cios') and two charts. -> Viz: A Donut chart for 'Distribui√ß√£o de Dificuldade' to show proportions of a whole. A horizontal Bar chart for 'T√≥picos por Frequ√™ncia' to easily compare the most common content areas. -> Interaction: Charts are dynamically updated based on filters. Tooltips provide precise numbers. -> Justification: These visuals give an immediate, quantitative overview of the filtered data. -> Library: Chart.js (Canvas-based).
        - Goal: Organize/Explore (Detailed view) -> Presentation: An interactive HTML table. -> Interaction: The table's content is entirely determined by the filter controls. Users can also sort columns. -> Justification: A table is the most effective way to present structured, multi-attribute data for detailed inspection. -> Library/Method: Vanilla JS DOM manipulation.
        - Goal: Analyze/Contextualize -> Presentation: Thematically organized text blocks and a dynamic list of topics. -> Interaction: Text blocks provide static context, while the 'Principais Conte√∫dos' list is generated from the filtered data, reinforcing key topics. -> Justification: This provides the qualitative insights from the report, giving meaning to the quantitative data seen in the charts and table. -> Library/Method: Vanilla JS DOM manipulation.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 500px; margin-left: auto; margin-right: auto; height: 320px; max-height: 40vh; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .nav-button { transition: all 0.2s ease-in-out; }
        .nav-button.active { background-color: #0d9488; color: white; }
        .nav-button:not(.active):hover { background-color: #f0fdfa; }
        .filter-checkbox:checked + label { border-color: #0d9488; background-color: #ccfbf1; }
        .table-sortable th { cursor: pointer; }
        .table-sortable th:hover .sort-icon { opacity: 1; }
        .sort-icon { opacity: 0.3; transition: opacity 0.2s; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-800">OBI Explorer Interativo</h1>
            <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Uma an√°lise interativa dos exerc√≠cios da Olimp√≠ada Brasileira de Inform√°tica (Modalidade Programa√ß√£o) de 2021 a 2024.</p>
        </header>

        <main>
            <div id="app-container" class="bg-white rounded-xl shadow-lg p-4 sm:p-6 md:p-8">
                
                <!-- Navigation -->
                <div class="mb-8 border-b border-slate-200">
                    <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                        <button onclick="changeTab('dashboard')" class="nav-button active text-teal-700 font-semibold border-b-2 border-transparent hover:border-slate-300 whitespace-nowrap py-4 px-4 text-sm" data-tab-toggle>
                            üìä Dashboard e Filtros
                        </button>
                        <button onclick="changeTab('analysis')" class="nav-button text-slate-500 hover:text-teal-700 border-b-2 border-transparent hover:border-slate-300 whitespace-nowrap py-4 px-4 text-sm" data-tab-toggle>
                            üí° An√°lise e Tend√™ncias
                        </button>
                        <button onclick="changeTab('recommendations')" class="nav-button text-slate-500 hover:text-teal-700 border-b-2 border-transparent hover:border-slate-300 whitespace-nowrap py-4 px-4 text-sm" data-tab-toggle>
                            üöÄ Recomenda√ß√µes de Estudo
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div id="dashboard" class="tab-content">
                    <section id="filters" class="mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            
                            <div>
                                <h3 class="font-semibold mb-2 text-slate-700">Ano</h3>
                                <div id="year-filter" class="flex flex-wrap gap-2"></div>
                            </div>
                            <div>
                                <h3 class="font-semibold mb-2 text-slate-700">N√≠vel</h3>
                                <div id="level-filter" class="flex flex-wrap gap-2"></div>
                            </div>
                            <div>
                                <h3 class="font-semibold mb-2 text-slate-700">Fase</h3>
                                <div id="phase-filter" class="flex flex-wrap gap-2"></div>
                            </div>
                            <div>
                                <h3 class="font-semibold mb-2 text-slate-700">Dificuldade</h3>
                                <div id="difficulty-filter" class="flex flex-wrap gap-2"></div>
                            </div>
                        </div>
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input type="text" id="search-input" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="üîé Pesquisar por nome ou conte√∫do...">
                            <button id="reset-filters" class="w-full md:w-auto justify-self-start bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-3 px-6 rounded-lg transition-colors">Limpar Filtros</button>
                        </div>
                    </section>
                    
                    <section id="stats" class="mb-12 p-6 bg-slate-100 rounded-lg">
                         <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold text-teal-800">Vis√£o Geral dos Exerc√≠cios Selecionados</h2>
                            <p class="text-slate-600 mt-1">Os gr√°ficos e a tabela abaixo s√£o atualizados dinamicamente com base nos filtros aplicados. Explore os dados para identificar padr√µes e focar seus estudos.</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-8">
                            <div class="bg-white p-4 rounded-lg shadow">
                                <h4 class="text-sm font-semibold text-slate-500">Exerc√≠cios Encontrados</h4>
                                <p id="total-exercises" class="text-3xl font-bold text-teal-600"></p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow">
                                <h4 class="text-sm font-semibold text-slate-500">M√©dia de Dificuldade</h4>
                                <p id="avg-difficulty" class="text-3xl font-bold text-teal-600"></p>
                            </div>
                             <div class="bg-white p-4 rounded-lg shadow">
                                <h4 class="text-sm font-semibold text-slate-500">T√≥pico Mais Comum</h4>
                                <p id="most-common-topic" class="text-xl md:text-2xl font-bold text-teal-600 h-10 flex items-center justify-center"></p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                            <div>
                                <h3 class="text-lg font-semibold text-center mb-2">Distribui√ß√£o por Dificuldade</h3>
                                <div class="chart-container">
                                    <canvas id="difficulty-chart"></canvas>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-center mb-2">Top 10 T√≥picos por Frequ√™ncia</h3>
                                <div class="chart-container">
                                    <canvas id="content-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="exercise-table">
                         <h2 class="text-2xl font-bold text-teal-800 text-center">Tabela de Exerc√≠cios</h2>
                         <p class="text-slate-600 mt-1 mb-6 text-center">Clique nos cabe√ßalhos para ordenar. Use os filtros acima para refinar a busca.</p>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white border border-slate-200 table-sortable">
                                <thead class="bg-slate-100">
                                    <tr>
                                        <th data-sort="ano" class="py-3 px-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Ano <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th data-sort="nivel" class="py-3 px-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">N√≠vel <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th data-sort="fase" class="py-3 px-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Fase <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th data-sort="nome" class="py-3 px-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Nome do Exerc√≠cio <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th data-sort="dificuldade" class="py-3 px-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Dificuldade <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th data-sort="conteudo" class="py-3 px-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Principal Conte√∫do <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                    </tr>
                                </thead>
                                <tbody id="table-body" class="divide-y divide-slate-200">
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <div id="analysis" class="tab-content hidden prose max-w-none">
                    <h2 class="text-2xl font-bold text-teal-800">An√°lise de T√≥picos e Tend√™ncias</h2>
                    <p>Esta se√ß√£o detalha os principais conte√∫dos e as tend√™ncias observadas nos problemas da OBI, ajudando a entender a progress√£o da complexidade. A an√°lise reflete os dados consolidados no relat√≥rio original, fornecendo um guia sobre o que esperar em cada n√≠vel da competi√ß√£o.</p>
                    
                    <h3>T√≥picos Fundamentais (N√≠vel J√∫nior e N√≠vel 1 - Fases Iniciais)</h3>
                    <p>Nos n√≠veis de entrada, os problemas consistentemente avaliam o dom√≠nio dos fundamentos da programa√ß√£o. A s√≥lida compreens√£o e aplica√ß√£o destes t√≥picos s√£o cruciais para avan√ßar.</p>
                    <ul>
                        <li><strong>L√≥gica de Programa√ß√£o:</strong> Traduzir um problema em uma sequ√™ncia de passos l√≥gicos.</li>
                        <li><strong>Estruturas Condicionais (if/else):</strong> Tomada de decis√µes baseada em condi√ß√µes.</li>
                        <li><strong>La√ßos de Repeti√ß√£o (for/while):</strong> Execu√ß√£o iterativa de blocos de c√≥digo para processar cole√ß√µes de dados ou realizar simula√ß√µes.</li>
                        <li><strong>Vari√°veis, Tipos de Dados e Operadores:</strong> Uso adequado de inteiros, reais, caracteres e realiza√ß√£o de c√°lculos.</li>
                    </ul>

                    <h3>T√≥picos Intermedi√°rios (N√≠vel 1 - Fases Avan√ßadas e N√≠vel 2 - Fases Iniciais)</h3>
                    <p>√Ä medida que os competidores avan√ßam, a OBI introduz estruturas de dados mais complexas e a necessidade de pensar em efici√™ncia algor√≠tmica.</p>
                    <ul>
                        <li><strong>Arrays (Vetores) e Matrizes:</strong> Armazenamento e manipula√ß√£o de cole√ß√µes de dados.</li>
                        <li><strong>Strings e Manipula√ß√£o Avan√ßada:</strong> Processamento de cadeias de caracteres e busca por padr√µes.</li>
                        <li><strong>Fun√ß√µes e Recurs√£o Simples:</strong> Modulariza√ß√£o do c√≥digo e resolu√ß√£o de problemas por meio da divis√£o em subproblemas.</li>
                        <li><strong>No√ß√µes de Complexidade e Ordena√ß√£o:</strong> Introdu√ß√£o √† efici√™ncia de algoritmos e uso de algoritmos de ordena√ß√£o e busca (linear e bin√°ria).</li>
                    </ul>

                    <h3>T√≥picos Avan√ßados (N√≠vel 2 - Fases Avan√ßadas)</h3>
                    <p>Nas fases mais avan√ßadas, a OBI testa a capacidade do aluno de aplicar paradigmas algor√≠tmicos sofisticados e estruturas de dados avan√ßadas, exigindo um estudo aprofundado.</p>
                    <ul>
                        <li><strong>Algoritmos Gulosos (Greedy):</strong> Tomada de decis√µes locais √≥timas.</li>
                        <li><strong>Programa√ß√£o Din√¢mica (PD):</strong> Resolu√ß√£o de problemas complexos quebrando-os em subproblemas sobrepostos.</li>
                        <li><strong>Teoria dos Grafos:</strong> Busca em Largura (BFS), Busca em Profundidade (DFS), caminhos m√≠nimos (Dijkstra), √°rvores geradoras m√≠nimas, etc.</li>
                        <li><strong>Estruturas de Dados Avan√ßadas:</strong> Pilhas, Filas, Heaps, Sets, Maps e Union-Find.</li>
                        <li><strong>Teoria dos N√∫meros e Geometria Computacional B√°sica.</strong></li>
                    </ul>
                    
                    <h3>Tend√™ncias na Formula√ß√£o dos Problemas</h3>
                    <p>Al√©m dos conte√∫dos, a forma como os problemas s√£o apresentados tamb√©m segue certas tend√™ncias:</p>
                    <ul>
                        <li><strong>Narrativas Envolventes (Storytelling):</strong> Problemas contextualizados em pequenas hist√≥rias, exigindo boa capacidade de interpreta√ß√£o.</li>
                        <li><strong>Casos de Borda e "Pegadinhas":</strong> Inclus√£o de casos limite que devem ser tratados corretamente para obter a pontua√ß√£o m√°xima.</li>
                        <li><strong>Uso de Subtarefas:</strong> Uma estrutura pedag√≥gica que permite pontua√ß√µes parciais com solu√ß√µes mais simples, incentivando uma abordagem incremental.</li>
                    </ul>

                </div>
                
                <div id="recommendations" class="tab-content hidden prose max-w-none">
                    <h2 class="text-2xl font-bold text-teal-800">Recomenda√ß√µes para Prepara√ß√£o</h2>
                    <p>Com base na an√°lise dos exerc√≠cios, estas recomenda√ß√µes podem ser √∫teis para estudantes que visam um bom desempenho na OBI. Uma prepara√ß√£o estruturada e consistente √© o caminho para o sucesso.</p>

                    <h3>1. Adote um Plano de Estudos Progressivo</h3>
                    <p>√â fundamental respeitar a progress√£o natural dos conte√∫dos. N√£o tente pular etapas.</p>
                    <ul>
                        <li><strong>Comece pelos Fundamentos:</strong> Domine l√≥gica, condicionais, la√ßos e entrada/sa√≠da. Pratique intensamente com problemas do N√≠vel J√∫nior e da Fase 1 do N√≠vel 1.</li>
                        <li><strong>Avance Gradualmente:</strong> Progrida para t√≥picos intermedi√°rios (arrays, strings, recurs√£o) e resolva problemas de fases subsequentes.</li>
                        <li><strong>Use Recursos Oficiais:</strong> Utilize os "Cadernos de Tarefas" das edi√ß√µes anteriores da OBI como a principal fonte de problemas para pr√°tica.</li>
                    </ul>

                    <h3>2. Foco na Resolu√ß√£o de Problemas e An√°lise de Solu√ß√µes</h3>
                    <p>A habilidade em olimp√≠adas √© desenvolvida primariamente atrav√©s da pr√°tica de resolu√ß√£o de problemas.</p>
                    <ul>
                        <li><strong>Tente Resolver Sozinho Primeiro:</strong> Dedique tempo suficiente para pensar em diferentes abordagens antes de consultar qualquer solu√ß√£o. O esfor√ßo para encontrar o caminho √© parte crucial do aprendizado.</li>
                        <li><strong>Analise Solu√ß√µes (Depois de Tentar):</strong> Ap√≥s resolver ou esgotar suas tentativas, analise as solu√ß√µes oficiais e coment√°rios de especialistas. Este processo permite aprender novas t√©cnicas, entender otimiza√ß√µes e identificar erros de racioc√≠nio.</li>
                    </ul>

                    <h3>3. Pratique com Consist√™ncia e Fa√ßa Simulados</h3>
                    <p>A consist√™ncia √© a chave para a consolida√ß√£o do conhecimento.</p>
                    <ul>
                        <li><strong>Mantenha uma Rotina:</strong> Resolva problemas regularmente, mesmo que por pouco tempo, para manter a mente afiada.</li>
                        <li><strong>Simule as Condi√ß√µes da Prova:</strong> Realize simulados utilizando provas antigas completas, respeitando rigorosamente os tempos estipulados. Isso ajuda a desenvolver a gest√£o do tempo, a resist√™ncia sob press√£o e a estrat√©gia de prova.</li>
                    </ul>
                    
                    <h3>4. Participe de Comunidades e Cursos</h3>
                    <p>Aprender em colabora√ß√£o pode acelerar muito o seu desenvolvimento.</p>
                    <ul>
                        <li><strong>Junte-se a Comunidades de Estudo:</strong> Participe de f√≥runs online e grupos de estudo. Discutir problemas com outros estudantes exp√µe voc√™ a diferentes formas de pensar.</li>
                        <li><strong>Considere Cursos Preparat√≥rios:</strong> Cursos e treinamentos espec√≠ficos para olimp√≠adas oferecem um curr√≠culo estruturado e orienta√ß√£o de quem j√° tem experi√™ncia.</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

<script>
const OBI_DATA = [
    { ano: 2024, nivel: 'J√∫nior', fase: 1, nome: 'Ogro', dificuldade: 'F√°cil', conteudo: 'Condicionais, Aritm√©tica' },
    { ano: 2024, nivel: 'J√∫nior', fase: 1, nome: 'Concurso', dificuldade: 'F√°cil', conteudo: 'Condicionais, L√≥gica simples' },
    { ano: 2024, nivel: 'J√∫nior', fase: 1, nome: 'Premia√ß√£o', dificuldade: 'F√°cil', conteudo: 'Loops, Condicionais' },
    { ano: 2024, nivel: 'N√≠vel 1', fase: 1, nome: 'Ogro', dificuldade: 'F√°cil', conteudo: 'Condicionais, Aritm√©tica' },
    { ano: 2024, nivel: 'N√≠vel 1', fase: 1, nome: 'Concurso', dificuldade: 'F√°cil', conteudo: 'Condicionais, L√≥gica simples' },
    { ano: 2024, nivel: 'N√≠vel 1', fase: 1, nome: 'Bact√©rias', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, Loops' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 1, nome: 'Contas a Pagar', dificuldade: 'M√©dio', conteudo: 'Ordena√ß√£o, Estruturas de Dados' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 1, nome: 'Decifra', dificuldade: 'M√©dio', conteudo: 'Manipula√ß√£o de Strings, Mapeamento' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 1, nome: 'Pares de Pontos', dificuldade: 'M√©dio', conteudo: 'Geometria, Loops aninhados' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 1, nome: 'Subsequ√™ncias', dificuldade: 'Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2024, nivel: 'J√∫nior', fase: 2, nome: 'Placas', dificuldade: 'F√°cil', conteudo: 'Manipula√ß√£o de Strings, Condicionais' },
    { ano: 2024, nivel: 'J√∫nior', fase: 2, nome: 'Campeonato', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, Contagem, Arrays' },
    { ano: 2024, nivel: 'J√∫nior', fase: 2, nome: 'C√°psulas', dificuldade: 'M√©dio', conteudo: 'Algoritmo Guloso, Ordena√ß√£o' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 2, nome: 'Gin√°stica', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, Arrays' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 2, nome: 'Figurinhas da Copa', dificuldade: 'M√©dio', conteudo: 'Estruturas de Dados, Contagem' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 2, nome: 'Rede Social', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (DFS/BFS)' },
    { ano: 2024, nivel: 'N√≠vel 2', fase: 2, nome: 'Torres de Han√≥i', dificuldade: 'Dif√≠cil', conteudo: 'Recurs√£o, An√°lise Matem√°tica' },
    { ano: 2023, nivel: 'J√∫nior', fase: 1, nome: 'Idades', dificuldade: 'F√°cil', conteudo: 'Condicionais, Aritm√©tica' },
    { ano: 2023, nivel: 'J√∫nior', fase: 1, nome: 'Toupeira', dificuldade: 'F√°cil', conteudo: 'Simula√ß√£o em Grid, Loops' },
    { ano: 2023, nivel: 'J√∫nior', fase: 1, nome: 'Zerinho', dificuldade: 'F√°cil', conteudo: 'Contagem, Condicionais' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 1, nome: 'Estoque', dificuldade: 'F√°cil', conteudo: 'Aritm√©tica, Condicionais' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 1, nome: 'Subsequ√™ncia', dificuldade: 'M√©dio', conteudo: 'Loops, Subarrays' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 1, nome: 'Toupeira', dificuldade: 'F√°cil', conteudo: 'Simula√ß√£o em Grid, Loops' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 1, nome: 'Estoque', dificuldade: 'F√°cil', conteudo: 'Aritm√©tica, Condicionais' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 1, nome: 'Guarda Costeira', dificuldade: 'M√©dio', conteudo: 'Geometria, Loops' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 1, nome: 'Lanche', dificuldade: 'M√©dio', conteudo: 'Algoritmo Guloso, Ordena√ß√£o' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 1, nome: 'Mapa', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (BFS/DFS)' },
    { ano: 2023, nivel: 'J√∫nior', fase: 2, nome: 'Chuva', dificuldade: 'F√°cil', conteudo: 'Simula√ß√£o, Arrays' },
    { ano: 2023, nivel: 'J√∫nior', fase: 2, nome: 'Embarque', dificuldade: 'M√©dio', conteudo: 'Filas, Simula√ß√£o' },
    { ano: 2023, nivel: 'J√∫nior', fase: 2, nome: 'L√¢mpadas', dificuldade: 'M√©dio', conteudo: 'L√≥gica, Bitmasks' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 2, nome: 'Chuva', dificuldade: 'F√°cil', conteudo: 'Simula√ß√£o, Arrays' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 2, nome: 'Embarque', dificuldade: 'M√©dio', conteudo: 'Filas, Simula√ß√£o' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 2, nome: 'L√¢mpadas', dificuldade: 'M√©dio', conteudo: 'L√≥gica, Bitmasks' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 2, nome: 'Rob√¥', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o em Grid, Loops' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 2, nome: 'Compressor RLE', dificuldade: 'M√©dio', conteudo: 'Manipula√ß√£o de Strings, Contagem' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 2, nome: 'Domin√≥', dificuldade: 'M√©dio', conteudo: 'Backtracking' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 2, nome: 'Inscritos', dificuldade: 'Dif√≠cil', conteudo: 'Estruturas de Dados, Ordena√ß√£o' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 2, nome: 'T√∫neis', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (Dijkstra)' },
    { ano: 2023, nivel: 'J√∫nior', fase: 3, nome: 'Corrida', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, Loops' },
    { ano: 2023, nivel: 'J√∫nior', fase: 3, nome: 'Fila de ingressos', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o de Fila, Arrays' },
    { ano: 2023, nivel: 'J√∫nior', fase: 3, nome: 'Torres', dificuldade: 'M√©dio', conteudo: 'L√≥gica, An√°lise de Padr√µes' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 3, nome: 'Cabo de Guerra', dificuldade: 'M√©dio', conteudo: 'For√ßa Bruta, Loops' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 3, nome: 'Digitais', dificuldade: 'M√©dio', conteudo: 'Manipula√ß√£o de Strings, Compara√ß√£o' },
    { ano: 2023, nivel: 'N√≠vel 1', fase: 3, nome: 'Rob√≥tica', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (BFS), Simula√ß√£o em grid' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 3, nome: 'Altru√≠smo', dificuldade: 'Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 3, nome: 'Chaves', dificuldade: 'Muito Dif√≠cil', conteudo: 'Grafos, Union-Find' },
    { ano: 2023, nivel: 'N√≠vel 2', fase: 3, nome: 'Investimento', dificuldade: 'Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2022, nivel: 'J√∫nior', fase: 1, nome: 'Cinema', dificuldade: 'F√°cil', conteudo: 'Condicionais' },
    { ano: 2022, nivel: 'J√∫nior', fase: 1, nome: 'Hotel', dificuldade: 'F√°cil', conteudo: 'Condicionais, Aritm√©tica' },
    { ano: 2022, nivel: 'J√∫nior', fase: 1, nome: 'Show', dificuldade: 'F√°cil', conteudo: 'Loops, Contagem' },
    { ano: 2022, nivel: 'J√∫nior', fase: 1, nome: 'Ca√ßa ao Tesouro', dificuldade: 'F√°cil', conteudo: 'Matrizes, Simula√ß√£o' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 1, nome: 'Hotel', dificuldade: 'F√°cil', conteudo: 'Condicionais, Aritm√©tica' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 1, nome: 'Bombom', dificuldade: 'M√©dio', conteudo: 'Strings, Contagem, Loops' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 1, nome: 'Maior Valor', dificuldade: 'M√©dio', conteudo: 'Strings, Loops, Manipula√ß√£o de n√∫meros' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 1, nome: 'Dona Formiga', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o em grid' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 1, nome: 'Hotel', dificuldade: 'F√°cil', conteudo: 'Estruturas Condicionais, L√≥gica' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 1, nome: 'Bombom', dificuldade: 'M√©dio', conteudo: 'Strings, Contagem, Loops' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 1, nome: 'Maior Valor', dificuldade: 'M√©dio', conteudo: 'Strings, Loops, Manipula√ß√£o de n√∫meros' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 1, nome: 'Parque de Divers√µes', dificuldade: 'M√©dio', conteudo: 'Grafos (BFS/DFS)' },
    { ano: 2022, nivel: 'J√∫nior', fase: 2, nome: 'Basquete', dificuldade: 'F√°cil', conteudo: 'Simula√ß√£o, Arrays' },
    { ano: 2022, nivel: 'J√∫nior', fase: 2, nome: 'Escada', dificuldade: 'M√©dio', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2022, nivel: 'J√∫nior', fase: 2, nome: 'Rob√¥ Colecionador', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o em grid, Loops' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 2, nome: 'Trof√©u', dificuldade: 'M√©dio', conteudo: 'Geometria, Ordena√ß√£o' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 2, nome: 'Caminho', dificuldade: 'M√©dio', conteudo: 'Grafos (BFS/DFS)' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 2, nome: 'Pir√¢mide', dificuldade: 'M√©dio', conteudo: 'Contagem, Padr√µes' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 2, nome: 'Trof√©u', dificuldade: 'M√©dio', conteudo: 'Geometria, Ordena√ß√£o' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 2, nome: 'Caminho', dificuldade: 'M√©dio', conteudo: 'Grafos (BFS/DFS)' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 2, nome: 'Pir√¢mide', dificuldade: 'Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2022, nivel: 'J√∫nior', fase: 3, nome: 'Jogo', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, L√≥gica de jogo' },
    { ano: 2022, nivel: 'J√∫nior', fase: 3, nome: 'Recibo', dificuldade: 'M√©dio', conteudo: 'Manipula√ß√£o de Strings, Formata√ß√£o' },
    { ano: 2022, nivel: 'J√∫nior', fase: 3, nome: 'Sequ√™ncia', dificuldade: 'M√©dio', conteudo: 'An√°lise de Padr√µes, Matem√°tica' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 3, nome: 'Chaves', dificuldade: 'M√©dio', conteudo: 'Grafos (√Årvores)' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 3, nome: 'Lista', dificuldade: 'Dif√≠cil', conteudo: 'Estruturas de Dados, Simula√ß√£o' },
    { ano: 2022, nivel: 'N√≠vel 1', fase: 3, nome: 'Subcadeias', dificuldade: 'Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica, String Matching' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 3, nome: 'Caminho N√≠vel', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (Dijkstra)' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 3, nome: 'Fechadura', dificuldade: 'Muito Dif√≠cil', conteudo: 'Bitmask DP, Grafos' },
    { ano: 2022, nivel: 'N√≠vel 2', fase: 3, nome: 'Rob√¥s', dificuldade: 'Muito Dif√≠cil', conteudo: 'Geometria Computacional' },
    { ano: 2021, nivel: 'J√∫nior', fase: 1, nome: 'Idade de Dona M√¥nica', dificuldade: 'F√°cil', conteudo: 'Aritm√©tica, Condicionais' },
    { ano: 2021, nivel: 'J√∫nior', fase: 1, nome: 'Plano de Internet', dificuldade: 'F√°cil', conteudo: 'Aritm√©tica, Loops' },
    { ano: 2021, nivel: 'J√∫nior', fase: 1, nome: 'Zero para Cancelar', dificuldade: 'F√°cil', conteudo: 'Pilha, L√≥gica' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 1, nome: 'Baralho', dificuldade: 'F√°cil', conteudo: 'Contagem, Arrays' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 1, nome: 'Cifra da Nlog√¥nia', dificuldade: 'F√°cil', conteudo: 'Manipula√ß√£o de Strings, Mapeamento' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 1, nome: 'Tempo de Resposta', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, Estruturas de Dados' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 1, nome: 'Lista de Chamada', dificuldade: 'M√©dio', conteudo: 'Ordena√ß√£o, Strings' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 1, nome: 'Sandu√≠che', dificuldade: 'M√©dio', conteudo: 'Janela Deslizante' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 1, nome: 'Torre', dificuldade: 'M√©dio', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2021, nivel: 'J√∫nior', fase: 2, nome: 'Duplas de T√™nis', dificuldade: 'F√°cil', conteudo: 'Ordena√ß√£o, L√≥gica' },
    { ano: 2021, nivel: 'J√∫nior', fase: 2, nome: 'M√≠nimo e M√°ximo', dificuldade: 'F√°cil', conteudo: 'Loops, Compara√ß√£o' },
    { ano: 2021, nivel: 'J√∫nior', fase: 2, nome: 'Pot√™ncias', dificuldade: 'M√©dio', conteudo: 'Matem√°tica, Loops' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 2, nome: 'Anagrama', dificuldade: 'M√©dio', conteudo: 'Ordena√ß√£o, Strings' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 2, nome: 'Frequ√™ncia na Aula', dificuldade: 'M√©dio', conteudo: 'Estruturas de Dados, Simula√ß√£o' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 2, nome: 'Recorde', dificuldade: 'M√©dio', conteudo: 'Loops, Vari√°veis de controle' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 2, nome: 'Acelera Nlog√¥nia', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o, L√≥gica' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 2, nome: 'Casamento de Inteiros', dificuldade: 'M√©dio', conteudo: 'Manipula√ß√£o de Strings' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 2, nome: 'M√≥bile', dificuldade: 'M√©dio', conteudo: 'Recurs√£o, √Årvores' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 2, nome: 'Cidade Nlog√¥nia', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (PD em DAG)' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 2, nome: 'Passatempo', dificuldade: 'M√©dio', conteudo: 'Backtracking' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 2, nome: 'Rede de Transmiss√£o', dificuldade: 'Dif√≠cil', conteudo: '√Årvore Geradora M√≠nima' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 2, nome: 'Caminho das Pontes', dificuldade: 'Dif√≠cil', conteudo: 'Grafos (Componentes Fortemente Conexas)' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 2, nome: 'Festa Ol√≠mpica', dificuldade: 'Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 2, nome: 'Pol√≠gonos', dificuldade: 'Muito Dif√≠cil', conteudo: 'Geometria Computacional' },
    { ano: 2021, nivel: 'J√∫nior', fase: 3, nome: 'Adivinha', dificuldade: 'M√©dio', conteudo: 'Busca Bin√°ria, L√≥gica Interativa' },
    { ano: 2021, nivel: 'J√∫nior', fase: 3, nome: 'Ret√¢ngulo', dificuldade: 'M√©dio', conteudo: 'Geometria, Loops' },
    { ano: 2021, nivel: 'J√∫nior', fase: 3, nome: 'Rob√¥', dificuldade: 'M√©dio', conteudo: 'Simula√ß√£o em Grid, Grafos (BFS)' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 3, nome: 'Contas Alternadas', dificuldade: 'M√©dio', conteudo: 'Programa√ß√£o Din√¢mica' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 3, nome: 'Escalonamento', dificuldade: 'Dif√≠cil', conteudo: 'Algoritmo Guloso, Ordena√ß√£o' },
    { ano: 2021, nivel: 'N√≠vel 1', fase: 3, nome: 'Xadrez Aleat√≥rio', dificuldade: 'Dif√≠cil', conteudo: 'Backtracking, An√°lise Combinat√≥ria' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 3, nome: 'Estrada', dificuldade: 'Muito Dif√≠cil', conteudo: 'Grafos (Fluxo M√°ximo)' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 3, nome: 'Muro', dificuldade: 'Muito Dif√≠cil', conteudo: 'Programa√ß√£o Din√¢mica em √Årvores' },
    { ano: 2021, nivel: 'N√≠vel 2', fase: 3, nome: 'Pintura', dificuldade: 'Muito Dif√≠cil', conteudo: 'Teoria dos Jogos' },
];

document.addEventListener('DOMContentLoaded', () => {
    const state = {
        filters: {
            years: [],
            levels: [],
            phases: [],
            difficulties: [],
            search: ''
        },
        sort: {
            column: 'ano',
            direction: 'asc'
        }
    };
    
    let difficultyChart, contentChart;
    const difficultyMap = { 'F√°cil': 1, 'M√©dio': 2, 'Dif√≠cil': 3, 'Muito Dif√≠cil': 4 };
    const difficultyColors = { 'F√°cil': '#2dd4bf', 'M√©dio': '#fbbf24', 'Dif√≠cil': '#f87171', 'Muito Dif√≠cil': '#9333ea' };

    function getUniqueValues(key) {
        const values = OBI_DATA.map(item => item[key]);
        return [...new Set(values)].sort((a, b) => {
            if(key === 'dificuldade') return difficultyMap[a] - difficultyMap[b];
            return String(a).localeCompare(String(b));
        });
    }

    function createFilterGroup(containerId, items, filterKey) {
        const container = document.getElementById(containerId);
        items.forEach(item => {
            const wrapper = document.createElement('div');
            const input = document.createElement('input');
            input.type = 'checkbox';
            input.id = `${filterKey}-${item}`;
            input.value = item;
            input.className = 'sr-only filter-checkbox';
            input.dataset.filter = filterKey;
            
            const label = document.createElement('label');
            label.htmlFor = input.id;
            label.textContent = item;
            label.className = 'block cursor-pointer px-3 py-1 border border-slate-300 rounded-full text-sm font-medium text-slate-700 transition-colors';

            wrapper.appendChild(input);
            wrapper.appendChild(label);
            container.appendChild(wrapper);
        });
    }

    function applyFilters() {
        let filteredData = [...OBI_DATA];

        if (state.filters.years.length) {
            filteredData = filteredData.filter(d => state.filters.years.includes(String(d.ano)));
        }
        if (state.filters.levels.length) {
            filteredData = filteredData.filter(d => state.filters.levels.includes(d.nivel));
        }
        if (state.filters.phases.length) {
            filteredData = filteredData.filter(d => state.filters.phases.includes(String(d.fase)));
        }
        if (state.filters.difficulties.length) {
            filteredData = filteredData.filter(d => state.filters.difficulties.includes(d.dificuldade));
        }
        if (state.filters.search) {
            const searchTerm = state.filters.search.toLowerCase();
            filteredData = filteredData.filter(d => d.nome.toLowerCase().includes(searchTerm) || d.conteudo.toLowerCase().includes(searchTerm));
        }

        sortData(filteredData);
        updateUI(filteredData);
    }

    function sortData(data) {
        const { column, direction } = state.sort;
        data.sort((a, b) => {
            let valA = a[column];
            let valB = b[column];

            if (column === 'dificuldade') {
                valA = difficultyMap[valA] || 0;
                valB = difficultyMap[valB] || 0;
            }

            let comparison = 0;
            if (valA > valB) {
                comparison = 1;
            } else if (valA < valB) {
                comparison = -1;
            }
            return direction === 'asc' ? comparison : -comparison;
        });
    }

    function updateUI(data) {
        updateStats(data);
        updateTable(data);
        updateDifficultyChart(data);
        updateContentChart(data);
    }
    
    function updateStats(data) {
        document.getElementById('total-exercises').textContent = data.length;

        if (data.length > 0) {
            const totalDifficulty = data.reduce((acc, item) => acc + (difficultyMap[item.dificuldade] || 0), 0);
            const avg = totalDifficulty / data.length;
            const avgText = Object.keys(difficultyMap).find(key => difficultyMap[key] >= avg) || 'N/A';
            document.getElementById('avg-difficulty').textContent = avgText;

            const contentCounts = data.flatMap(d => d.conteudo.split(/, | \/ /))
                .reduce((acc, topic) => {
                    const cleanTopic = topic.trim();
                    acc[cleanTopic] = (acc[cleanTopic] || 0) + 1;
                    return acc;
                }, {});
            const mostCommon = Object.entries(contentCounts).sort((a, b) => b[1] - a[1])[0];
            document.getElementById('most-common-topic').textContent = mostCommon ? mostCommon[0] : 'N/A';
        } else {
            document.getElementById('avg-difficulty').textContent = 'N/A';
            document.getElementById('most-common-topic').textContent = 'N/A';
        }
    }

    function updateTable(data) {
        const tableBody = document.getElementById('table-body');
        tableBody.innerHTML = '';
        data.forEach(item => {
            const row = document.createElement('tr');
            row.className = 'hover:bg-slate-50 transition-colors';
            row.innerHTML = `
                <td class="py-3 px-4 text-sm">${item.ano}</td>
                <td class="py-3 px-4 text-sm">${item.nivel}</td>
                <td class="py-3 px-4 text-sm">${item.fase}</td>
                <td class="py-3 px-4 text-sm font-medium">${item.nome}</td>
                <td class="py-3 px-4 text-sm"><span class="px-2 py-1 rounded-full text-xs font-semibold" style="color: ${difficultyColors[item.dificuldade]}; background-color: ${difficultyColors[item.dificuldade]}20;">${item.dificuldade}</span></td>
                <td class="py-3 px-4 text-sm text-slate-600">${item.conteudo}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    function updateDifficultyChart(data) {
        const ctx = document.getElementById('difficulty-chart').getContext('2d');
        const difficultyCounts = data.reduce((acc, item) => {
            acc[item.dificuldade] = (acc[item.dificuldade] || 0) + 1;
            return acc;
        }, {});

        const sortedLabels = Object.keys(difficultyCounts).sort((a,b) => difficultyMap[a] - difficultyMap[b]);
        const chartData = sortedLabels.map(label => difficultyCounts[label]);
        const chartColors = sortedLabels.map(label => difficultyColors[label]);

        if (difficultyChart) difficultyChart.destroy();
        difficultyChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: sortedLabels,
                datasets: [{
                    data: chartData,
                    backgroundColor: chartColors,
                    borderColor: '#ffffff',
                    borderWidth: 2,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 12 } } },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) label += ': ';
                                if (context.parsed !== null) {
                                    label += context.parsed;
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }

    function updateContentChart(data) {
        const ctx = document.getElementById('content-chart').getContext('2d');
        const contentCounts = data
            .flatMap(d => d.conteudo.split(/, | \/ /).map(t => t.trim()))
            .reduce((acc, topic) => {
                if (topic) {
                   acc[topic] = (acc[topic] || 0) + 1;
                }
                return acc;
            }, {});

        const sortedContent = Object.entries(contentCounts)
            .sort((a, b) => b[1] - a[1])
            .slice(0, 10);

        if (contentChart) contentChart.destroy();
        contentChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: sortedContent.map(item => item[0]),
                datasets: [{
                    label: 'Frequ√™ncia',
                    data: sortedContent.map(item => item[1]),
                    backgroundColor: '#0d9488',
                    borderRadius: 4,
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                     x: { beginAtZero: true, ticks: { precision: 0 } },
                     y: { ticks: {
                        callback: function(value, index, values) {
                            const label = this.getLabelForValue(value);
                            return label.length > 20 ? label.substring(0, 20) + '...' : label;
                        }
                     }}
                },
                plugins: { legend: { display: false } }
            }
        });
    }

    function setupEventListeners() {
        document.querySelectorAll('input[type="checkbox"][data-filter]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const filterKey = checkbox.dataset.filter;
                state.filters[filterKey] = Array.from(document.querySelectorAll(`input[data-filter="${filterKey}"]:checked`)).map(cb => cb.value);
                applyFilters();
            });
        });

        document.getElementById('search-input').addEventListener('input', (e) => {
            state.filters.search = e.target.value;
            applyFilters();
        });

        document.getElementById('reset-filters').addEventListener('click', () => {
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.getElementById('search-input').value = '';
            state.filters = { years: [], levels: [], phases: [], difficulties: [], search: '' };
            applyFilters();
        });

        document.querySelectorAll('.table-sortable th').forEach(header => {
            header.addEventListener('click', () => {
                const column = header.dataset.sort;
                if (state.sort.column === column) {
                    state.sort.direction = state.sort.direction === 'asc' ? 'desc' : 'asc';
                } else {
                    state.sort.column = column;
                    state.sort.direction = 'asc';
                }
                applyFilters();
            });
        });
    }

    function init() {
        createFilterGroup('year-filter', getUniqueValues('ano'), 'years');
        createFilterGroup('level-filter', getUniqueValues('nivel'), 'levels');
        createFilterGroup('phase-filter', getUniqueValues('fase'), 'phases');
        createFilterGroup('difficulty-filter', getUniqueValues('dificuldade'), 'difficulties');
        
        setupEventListeners();
        applyFilters();
    }
    
    init();
});

function changeTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.add('hidden');
    });
    document.querySelectorAll('[data-tab-toggle]').forEach(button => {
        button.classList.remove('active', 'border-teal-600');
    });

    document.getElementById(tabId).classList.remove('hidden');
    document.querySelector(`[onclick="changeTab('${tabId}')"]`).classList.add('active', 'border-teal-600');
}
</script>

</body>
</html>